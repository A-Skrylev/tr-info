<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê—Ä—Ö–µ—Ç–∏–ø–∏—á–µ—Å–∫–∏–π –æ–ø—Ä–æ—Å–Ω–∏–∫ ¬∑ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å ¬∑ 12 —Å–∏—Å—Ç–µ–º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
        }

        body {
            background: linear-gradient(145deg, #0a0f1e 0%, #141b2b 100%);
            min-height: 100vh;
            color: #ecf0f5;
            padding: 1.5rem 1rem;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: rgba(18, 26, 40, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(90, 120, 200, 0.15);
            border-radius: 2rem;
            padding: 2rem 2rem 2.5rem;
            box-shadow: 0 30px 45px -20px #000000cc;
        }

        h1 {
            font-size: 2.4rem;
            font-weight: 500;
            background: linear-gradient(135deg, #ffffff, #b0c8ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 0.4rem;
        }

        .subtitle {
            color: #95a9d9;
            font-size: 1rem;
            border-left: 3px solid #5272c4;
            padding-left: 1.2rem;
            margin: 0.8rem 0 1.8rem 0.2rem;
        }

        .age-selector {
            background: #1e2a3a;
            padding: 1.5rem 2rem;
            border-radius: 3rem;
            margin: 1.2rem 0 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            border: 1px solid #3f5077;
        }

        .age-selector label {
            font-size: 1.3rem;
            color: #baceff;
        }

        .age-selector select {
            background: #0c1422;
            color: white;
            font-size: 1.2rem;
            padding: 0.7rem 2rem;
            border-radius: 3rem;
            border: 1px solid #5a72a5;
            outline: none;
        }

        .progress {
            background: #1d263b;
            height: 10px;
            border-radius: 60px;
            margin: 25px 0 20px;
            border: 1px solid #33415e;
            overflow: hidden;
        }

        .progress-fill {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #5f7edb, #9f88e5);
            border-radius: 60px;
            transition: width 0.2s;
        }

        .question-container {
            background: #0e1629c9;
            border-radius: 2rem;
            padding: 2rem 2rem 1.8rem;
            border: 1px solid #32415f;
            margin: 1.8rem 0;
        }

        .scale-label {
            display: inline-block;
            background: #25324b;
            padding: 0.3rem 1.4rem;
            border-radius: 40px;
            font-size: 0.9rem;
            color: #bdd0ff;
            margin-bottom: 1rem;
            border: 1px solid #4b608b;
        }

        .question-text {
            font-size: 1.45rem;
            font-weight: 400;
            line-height: 1.4;
            margin-bottom: 2rem;
        }

        .likert {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 0.8rem;
            margin: 2rem 0 0.5rem;
        }

        .likert-option {
            flex: 1 0 70px;
            text-align: center;
        }

        .likert-option input[type="radio"] {
            display: none;
        }

        .likert-option label {
            display: block;
            background: #1b2440;
            border: 1px solid #3f4f74;
            border-radius: 40px;
            padding: 0.9rem 0.2rem;
            font-size: 0.95rem;
            color: #c4d0f0;
            cursor: pointer;
            transition: 0.1s;
            box-shadow: 0 4px 8px #00000050;
        }

        .likert-option input[type="radio"]:checked + label {
            background: #435e91;
            border-color: #9ab3ff;
            color: white;
            box-shadow: 0 0 15px #4a6bb0;
        }

        .likert-labels {
            display: flex;
            justify-content: space-between;
            color: #8295c0;
            font-size: 0.85rem;
            padding: 0 8px;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        button {
            background: #26334f;
            border: 1px solid #435983;
            color: white;
            font-size: 1.1rem;
            padding: 0.9rem 2.2rem;
            border-radius: 60px;
            cursor: pointer;
            transition: 0.1s;
            box-shadow: 0 6px 12px black;
        }

        button:hover:not(:disabled) {
            background: #33466b;
            border-color: #6a8bcf;
            transform: scale(1.02);
        }

        button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .counter {
            background: #1f2a40;
            padding: 0.5rem 1.8rem;
            border-radius: 60px;
            border: 1px solid #3b4d74;
            color: #b4c5fd;
        }

        /* –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π –±–ª–æ–∫ */
        .level-badge {
            font-size: 0.9rem;
            background: #262f47;
            padding: 0.2rem 1.2rem;
            border-radius: 30px;
            border: 1px solid #596e9e;
            display: inline-block;
            margin: 0.5rem 0;
        }

        .result-card {
            background: #111b2ee0;
            border-radius: 2rem;
            padding: 2rem;
            margin: 2rem 0;
            border-left: 6px solid;
        }

        .white-card { border-color: #6fe68b; }
        .gray-card { border-color: #a5b3ce; }
        .black-card { border-color: #f48181; }

        .archetype-title {
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .archetype-badge {
            font-size: 0.9rem;
            padding: 0.3rem 1.2rem;
            border-radius: 60px;
            background: #232f4b;
            border: 1px solid #5e74b0;
            display: inline-block;
            margin: 0.3rem 0 1rem;
        }

        .system-row {
            display: flex;
            align-items: center;
            margin: 0.8rem 0;
            gap: 10px;
        }
        .system-name {
            width: 120px;
            font-weight: 500;
        }
        .level-bar-container {
            flex: 1;
            height: 24px;
            background: #1a2338;
            border-radius: 30px;
            overflow: hidden;
            display: flex;
        }
        .level-segment {
            height: 100%;
            transition: width 0.3s;
        }
        .segment-1 { background: #3b4a6b; } /* —Ä–µ–ø—Ç–∏–ª—å–Ω—ã–π */
        .segment-2 { background: #5f7edb; } /* –ª–∏–º–±–∏—á–µ—Å–∫–∏–π */
        .segment-3 { background: #a886e5; } /* –∫–æ—Ä–∫–æ–≤—ã–π */
        .segment-4 { background: #d4af37; } /* –º–µ—Ç–∞ */
        .age-note {
            font-size: 0.9rem;
            color: #b3c3ee;
            margin-left: 10px;
        }

        .mystic-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 1.5rem 0;
        }
        .mystic-tag {
            background: #1b253f;
            padding: 0.3rem 1.2rem;
            border-radius: 30px;
            border: 1px solid #4f6498;
        }

        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 30px 0 10px;
            font-size: 0.85rem;
            flex-wrap: wrap;
        }
        .legend span::before {
            content: "‚óè";
            margin-right: 6px;
            font-size: 1.2rem;
            vertical-align: middle;
        }
        .leg-reptile { color: #7b8ab3; } .leg-reptile::before { color: #3b4a6b; }
        .leg-limbic { color: #7b8ab3; } .leg-limbic::before { color: #5f7edb; }
        .leg-cortex { color: #7b8ab3; } .leg-cortex::before { color: #a886e5; }
        .leg-meta { color: #7b8ab3; } .leg-meta::before { color: #d4af37; }

        footer {
            text-align: center;
            margin-top: 40px;
            color: #5d71a0;
            font-size: 0.85rem;
        }
    </style>
</head>
<body>
<div class="container" id="app">
    <h1>üß¨ –ò–ï–†–ê–†–•–ò–ß–ï–°–ö–ê–Ø –ú–û–î–ï–õ–¨ –ê–†–•–ï–¢–ò–ü–û–í</h1>
    <div class="subtitle">12 —Å–∏—Å—Ç–µ–º ¬∑ 4 —É—Ä–æ–≤–Ω—è —Ä–∞–∑–≤–∏—Ç–∏—è (—Ä–µ–ø—Ç–∏–ª—å–Ω—ã–π / –ª–∏–º–±–∏—á–µ—Å–∫–∏–π / –∫–æ—Ä–∫–æ–≤—ã–π / –º–µ—Ç–∞)</div>

    <!-- –≤—ã–±–æ—Ä –≤–æ–∑—Ä–∞—Å—Ç–∞ -->
    <div class="age-selector">
        <label>üéÇ –í–∞—à –≤–æ–∑—Ä–∞—Å—Ç:</label>
        <select id="ageSelect">
            <option value="1">0‚Äì2 –≥–æ–¥–∞</option>
            <option value="2">3‚Äì5 –ª–µ—Ç</option>
            <option value="3">6‚Äì11 –ª–µ—Ç</option>
            <option value="4">12‚Äì17 –ª–µ—Ç</option>
            <option value="5">18‚Äì25 –ª–µ—Ç</option>
            <option value="6" selected>26‚Äì40 –ª–µ—Ç</option>
            <option value="7">41‚Äì60 –ª–µ—Ç</option>
            <option value="8">60+ –ª–µ—Ç</option>
        </select>
    </div>

    <!-- –ø—Ä–æ–≥—Ä–µ—Å –±–∞—Ä -->
    <div class="progress"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>

    <!-- –±–ª–æ–∫ –æ–ø—Ä–æ—Å–∞ -->
    <div id="quizBlock">
        <div class="question-container">
            <span class="scale-label" id="currentScaleLabel">...</span>
            <div class="question-text" id="currentQuestion">...</div>
            <div class="likert" id="likertContainer"></div>
            <div class="likert-labels"><span>—Å–æ–≤—Å–µ–º –Ω–µ –ø—Ä–æ –º–µ–Ω—è</span><span>–∞–±—Å–æ–ª—é—Ç–Ω–æ —Ç–æ—á–Ω–æ –ø—Ä–æ –º–µ–Ω—è</span></div>
        </div>
        <div class="nav-buttons">
            <button id="prevBtn" disabled>‚Üê –ù–∞–∑–∞–¥</button>
            <span class="counter" id="questionCounter">1 / 60</span>
            <button id="nextBtn">–î–∞–ª–µ–µ ‚Üí</button>
        </div>
    </div>

    <!-- –±–ª–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—Å–∫—Ä—ã—Ç) -->
    <div id="resultBlock" style="display: none;"></div>

    <div class="legend">
        <span class="leg-reptile"> —Ä–µ–ø—Ç–∏–ª—å–Ω—ã–π (–±–∞–∑–∞, —Å—Ç–∞–±–∏–ª–µ–Ω)</span>
        <span class="leg-limbic"> –ª–∏–º–±–∏—á–µ—Å–∫–∏–π (—ç–º–æ—Ü–∏–∏, –∫—Ä–∏—Ç–∏—á. –ø–µ—Ä–∏–æ–¥—ã)</span>
        <span class="leg-cortex"> –∫–æ—Ä–∫–æ–≤—ã–π (–∫–æ–Ω—Ç—Ä–æ–ª—å, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)</span>
        <span class="leg-meta"> –º–µ—Ç–∞-—Å–∏—Å—Ç–µ–º—ã (—Å–º—ã—Å–ª, —Ü–µ–Ω–Ω–æ—Å—Ç–∏)</span>
    </div>
    <footer>–≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã ¬∑ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Ä–∞–∑–≤–∏—Ç–∏—è ¬∑ —Å–≤—è–∑—å —Å 64 –∞—Ä—Ö–µ—Ç–∏–ø–∞–º–∏</footer>
</div>

<script>
(function() {
    // ---------- –ù–û–í–ê–Ø –ë–ê–ó–ê: 12 –°–ò–°–¢–ï–ú, –ö–ê–ñ–î–ê–Ø 5 –í–û–ü–†–û–°–û–í = 60 –≤–æ–ø—Ä–æ—Å–æ–≤ ----------
    const scaleNames = [
        "–¢–ï–†–†–ò–¢–û–†–ò–Ø", "–ò–ï–†–ê–†–•–ò–Ø", "–†–ò–¢–£–ê–õ",        // —Ä–µ–ø—Ç–∏–ª—å–Ω—ã–µ  (1-3)
        "–ü–û–ò–°–ö", "–°–¢–†–ê–•", "–ì–ù–ï–í", "–ü–†–ò–í–Ø–ó–ê–ù–ù–û–°–¢–¨", "–ó–ê–ë–û–¢–ê", "–ò–ì–†–ê",   // –ª–∏–º–±–∏—á–µ—Å–∫–∏–µ (4-9)
        "–ö–û–ù–¢–†–û–õ–¨", "–°–û–¶–ò–ê–õ–¨–ù–û–°–¢–¨", "–°–ú–´–°–õ"        // –∫–æ—Ä–∫–æ–≤—ã–µ + –º–µ—Ç–∞ (10-12)
    ];

    // 60 –≤–æ–ø—Ä–æ—Å–æ–≤ (–ø–æ 5 –Ω–∞ –∫–∞–∂–¥—É—é –∏–∑ 12 —à–∫–∞–ª)
    const questionsDB = [
        // –¢–ï–†–†–ò–¢–û–†–ò–Ø (5)
        "–Ø –æ—Å—Ç—Ä–æ —á—É–≤—Å—Ç–≤—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ –ª–∏—á–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ",
        "–ú–µ–Ω—è —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –≤—Ç–æ—Ä–≥–∞–µ—Ç—Å—è –Ω–∞ –º–æ—é —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é",
        "–Ø —á—ë—Ç–∫–æ –º–∞—Ä–∫–∏—Ä—É—é —Å–≤–æ–∏ –≤–µ—â–∏ –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ",
        "–ú–Ω–µ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å, –≥–¥–µ –º–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã",
        "–Ø –∑–∞—â–∏—â–∞—é —Å–≤–æ—ë –º–µ—Å—Ç–æ –æ—Ç –ø–æ—Å—è–≥–∞—Ç–µ–ª—å—Å—Ç–≤",
        // –ò–ï–†–ê–†–•–ò–Ø (5)
        "–Ø –≤—Å–µ–≥–¥–∞ –∑–∞–º–µ—á–∞—é, –∫—Ç–æ –≤ –≥—Ä—É–ø–ø–µ –≥–ª–∞–≤–Ω—ã–π",
        "–ú–Ω–µ –≤–∞–∂–Ω–æ –º–æ—ë –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –æ–±—â–µ—Å—Ç–≤–µ",
        "–Ø —Å—Ç—Ä–µ–º–ª—é—Å—å –∫ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–º—É —Å—Ç–∞—Ç—É—Å—É",
        "–Ø –ø–æ–¥—á–∏–Ω—è—é—Å—å —Ç–µ–º, –∫—Ç–æ –≤—ã—à–µ, –∏ –∂–¥—É –ø–æ–¥—á–∏–Ω–µ–Ω–∏—è –æ—Ç —Ç–µ—Ö, –∫—Ç–æ –Ω–∏–∂–µ",
        "–Ø —á—É–≤—Å—Ç–≤—É—é –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç, –µ—Å–ª–∏ –∏–µ—Ä–∞—Ä—Ö–∏—è –Ω–µ—è—Å–Ω–∞",
        // –†–ò–¢–£–ê–õ (5)
        "–Ø –ª—é–±–ª—é –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ä–∏—Ç—É–∞–ª—ã –∏ –ø—Ä–∏–≤—ã—á–∫–∏",
        "–ú–Ω–µ –≤–∞–∂–Ω–æ —Å–æ–±–ª—é–¥–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π",
        "–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ —Ä–∞—Å–ø–æ—Ä—è–¥–∫–∞ –º–µ–Ω—è —Ç—Ä–µ–≤–æ–∂–∏—Ç",
        "–£ –º–µ–Ω—è –µ—Å—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ä–∏—Ç—É–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —è —Å–æ–±–ª—é–¥–∞—é",
        "–Ø —á—É–≤—Å—Ç–≤—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–∏ –∑–Ω–∞–∫–æ–º—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π",
        // –ü–û–ò–°–ö (5)
        "–ú–µ–Ω—è —Ç—è–Ω–µ—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–æ–≤–æ–µ",
        "–Ø –ª–µ–≥–∫–æ –∑–∞–≥–æ—Ä–∞—é—Å—å –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω—ã–º",
        "–°–∫—É–∫–∞ –¥–ª—è –º–µ–Ω—è –º—É—á–∏—Ç–µ–ª—å–Ω–∞",
        "–Ø –≥–æ—Ç–æ–≤ —Ä–∏—Å–∫–æ–≤–∞—Ç—å —Ä–∞–¥–∏ –Ω–æ–≤–æ–≥–æ –æ–ø—ã—Ç–∞",
        "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –º–µ—Å—Ç–∞",
        // –°–¢–†–ê–• (5)
        "–Ø —á–∞—Å—Ç–æ —Ç—Ä–µ–≤–æ–∂—É—Å—å –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ–ø–∞—Å–Ω–æ—Å—Ç—è—Ö",
        "–ù–æ–≤—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç —É –º–µ–Ω—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ",
        "–Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –∏–∑–±–µ–≥–∞—Ç—å —Ä–∏—Å–∫–∞",
        "–ë—É–¥—É—â–µ–µ —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ",
        "–Ø —Ç—â–∞—Ç–µ–ª—å–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞—é —É–≥—Ä–æ–∑—ã",
        // –ì–ù–ï–í (5)
        "–ú–µ–Ω—è –ª–µ–≥–∫–æ —Ä–∞–∑–æ–∑–ª–∏—Ç—å",
        "–Ø –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä—É—é –Ω–∞ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å",
        "–í –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ —è —Å–∫–æ—Ä–µ–µ –Ω–∞–ø–∞–¥–∞—é",
        "–ú–Ω–µ —Ç—Ä—É–¥–Ω–æ —Å–¥–µ—Ä–∂–∞—Ç—å –≥–Ω–µ–≤, –∫–æ–≥–¥–∞ –º–µ–Ω—è –ø—Ä–æ–≤–æ—Ü–∏—Ä—É—é—Ç",
        "–ö–æ–≥–¥–∞ —á—Ç–æ-—Ç–æ –º–µ—à–∞–µ—Ç, —è —Ä–∞–∑–¥—Ä–∞–∂–∞—é—Å—å",
        // –ü–†–ò–í–Ø–ó–ê–ù–ù–û–°–¢–¨ (5)
        "–ú–Ω–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å —Å –±–ª–∏–∑–∫–∏–º–∏",
        "–Ø —Ç—è–∂–µ–ª–æ –ø–µ—Ä–µ–∂–∏–≤–∞—é —Ä–∞–∑–ª—É–∫—É",
        "–û–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ –¥–ª—è –º–µ–Ω—è –º—É—á–∏—Ç–µ–ª—å–Ω–æ",
        "–Ø —Å–∏–ª—å–Ω–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Å—å –∫ –ª—é–¥—è–º",
        "–ú–Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, —á—Ç–æ –º–µ–Ω—è –ª—é–±—è—Ç",
        // –ó–ê–ë–û–¢–ê (5)
        "–Ø –ª—é–±–ª—é –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –¥—Ä—É–≥–∏—Ö",
        "–ú–Ω–µ –≤–∞–∂–Ω–æ –ø–æ–º–æ–≥–∞—Ç—å –±–ª–∏–∑–∫–∏–º",
        "–Ø –≥–æ—Ç–æ–≤ –∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å —Å–≤–æ–∏–º –≤—Ä–µ–º–µ–Ω–µ–º —Ä–∞–¥–∏ –¥—Ä—É–≥–∏—Ö",
        "–ú–µ–Ω—è —Ç—è–Ω–µ—Ç –æ–ø–µ–∫–∞—Ç—å –∏ –æ–±–µ—Ä–µ–≥–∞—Ç—å",
        "–ó–∞–±–æ—Ç–∞ –ø—Ä–∏–Ω–æ—Å–∏—Ç –º–Ω–µ —Ä–∞–¥–æ—Å—Ç—å",
        // –ò–ì–†–ê (5)
        "–Ø –ª—é–±–ª—é –∏–≥—Ä–∞—Ç—å –∏ –¥—É—Ä–∞—á–∏—Ç—å—Å—è",
        "–Æ–º–æ—Ä –ø–æ–º–æ–≥–∞–µ—Ç –º–Ω–µ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏",
        "–Ø –ª–µ–≥–∫–æ –æ—Ç–Ω–æ—à—É—Å—å –∫ –∂–∏–∑–Ω–∏",
        "–ú–Ω–µ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –≤ –¥–µ–ª–µ –±—ã–ª —ç–ª–µ–º–µ–Ω—Ç –∏–≥—Ä—ã",
        "–Ø –æ–±–æ–∂–∞—é –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è",
        // –ö–û–ù–¢–†–û–õ–¨ (5)
        "–Ø –≤—Å–µ–≥–¥–∞ –ø–ª–∞–Ω–∏—Ä—É—é —Å–≤–æ–∏ –¥–µ–ª–∞",
        "–ú–Ω–µ –ª–µ–≥–∫–æ —Å–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–º–ø—É–ª—å—Å–∏–≤–Ω—ã–µ –∂–µ–ª–∞–Ω–∏—è",
        "–Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –ø–æ—Ä—è–¥–æ–∫ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É",
        "–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏ –≤–∞–∂–Ω–µ–µ —Å–∏—é–º–∏–Ω—É—Ç–Ω—ã—Ö",
        "–Ø –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ–ª–æ–≤–µ–∫",
        // –°–û–¶–ò–ê–õ–¨–ù–û–°–¢–¨ (5) ‚Äî —Ç–µ–æ—Ä–∏—è —Å–æ–∑–Ω–∞–Ω–∏—è, —ç–º–ø–∞—Ç–∏—è, –º–æ—Ä–∞–ª—å
        "–Ø –ª–µ–≥–∫–æ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —á—É–≤—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥–∏–µ",
        "–ú–µ–Ω—è –≤–æ–ª–Ω—É–µ—Ç —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å",
        "–Ø —á–∞—Å—Ç–æ —Å—Ç–∞–≤–ª—é —Å–µ–±—è –Ω–∞ –º–µ—Å—Ç–æ –¥—Ä—É–≥–æ–≥–æ",
        "–ú–Ω–µ –≤–∞–∂–Ω–æ, —á—Ç–æ –æ–±–æ –º–Ω–µ –¥—É–º–∞—é—Ç –æ–∫—Ä—É–∂–∞—é—â–∏–µ",
        "–Ø —á—É–≤—Å—Ç–≤—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –æ–±—â–µ—Å—Ç–≤–æ–º",
        // –°–ú–´–°–õ (5) ‚Äî —Ü–µ–Ω–Ω–æ—Å—Ç–∏, —Ç—Ä–∞–Ω—Å—Ü–µ–Ω–¥–µ–Ω—Ü–∏—è
        "–î–ª—è –º–µ–Ω—è –≤–∞–∂–Ω—ã –ø–æ–∏—Å–∫–∏ —Å–º—ã—Å–ª–∞ –∂–∏–∑–Ω–∏",
        "–£ –º–µ–Ω—è –µ—Å—Ç—å —Å–∏—Å—Ç–µ–º–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä–æ–π —è —Å–ª–µ–¥—É—é",
        "–ú–µ–Ω—è –≤–æ–ª–Ω—É—é—Ç –≤–æ–ø—Ä–æ—Å—ã –¥—É—Ö–æ–≤–Ω–æ—Å—Ç–∏",
        "–Ø —Å—Ç—Ä–µ–º–ª—é—Å—å –∫ —á–µ–º—É-—Ç–æ –±–æ–ª—å—à–µ–º—É, —á–µ–º —è —Å–∞–º",
        "–ú–æ–∏ —É–±–µ–∂–¥–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç –º–æ—é –∂–∏–∑–Ω—å"
    ];

    // –∏–Ω–¥–µ–∫—Å—ã –Ω–∞—á–∞–ª–∞ –∫–∞–∂–¥–æ–π —à–∫–∞–ª—ã (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)
    const scaleStart = [0,5,10,15,20,25,30,35,40,45,50,55]; // 12 —à–∫–∞–ª

    let answers = new Array(60).fill(3); // –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (1-5)
    let currentIndex = 0;

    // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
    const ageSelect = document.getElementById('ageSelect');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const counterSpan = document.getElementById('questionCounter');
    const questionDiv = document.getElementById('currentQuestion');
    const scaleSpan = document.getElementById('currentScaleLabel');
    const likertDiv = document.getElementById('likertContainer');
    const progressFill = document.getElementById('progressFill');
    const quizBlock = document.getElementById('quizBlock');
    const resultBlock = document.getElementById('resultBlock');

    // –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
    function renderQuestion() {
        const qText = questionsDB[currentIndex];
        const scaleIdx = Math.floor(currentIndex / 5);
        scaleSpan.innerText = scaleNames[scaleIdx];

        questionDiv.innerText = qText;
        let html = '';
        for (let i=1; i<=5; i++) {
            const checked = answers[currentIndex] === i ? 'checked' : '';
            html += `<div class="likert-option">
                <input type="radio" name="likert" id="opt${i}" value="${i}" ${checked}>
                <label for="opt${i}">${i}</label>
            </div>`;
        }
        likertDiv.innerHTML = html;

        document.querySelectorAll('input[name="likert"]').forEach(r => {
            r.addEventListener('change', (e) => {
                answers[currentIndex] = parseInt(e.target.value);
                updateNav();
            });
        });

        counterSpan.innerText = `${currentIndex+1} / 60`;
        progressFill.style.width = ((currentIndex+1)/60*100)+'%';
        updateNav();
    }

    function updateNav() {
        prevBtn.disabled = currentIndex === 0;
        if (currentIndex === 59) nextBtn.innerText = '–ó–∞–≤–µ—Ä—à–∏—Ç—å';
        else nextBtn.innerText = '–î–∞–ª–µ–µ ‚Üí';
    }

    prevBtn.addEventListener('click', ()=>{
        if (currentIndex > 0) { currentIndex--; renderQuestion(); }
    });

    nextBtn.addEventListener('click', ()=>{
        if (currentIndex < 59) {
            currentIndex++;
            renderQuestion();
        } else {
            computeResult();
        }
    });

    // ---------- –†–ê–°–ß–Å–¢ –° –£–ß–Å–¢–û–ú –í–û–ó–†–ê–°–¢–ê ----------
    function computeResult() {
        // —Å—ã—Ä—ã–µ —Å—É–º–º—ã –ø–æ 12 —à–∫–∞–ª–∞–º (–∫–∞–∂–¥–∞—è –æ—Ç 5 –¥–æ 25)
        let sums = new Array(12).fill(0);
        for (let i=0; i<60; i++) {
            let scaleIdx = Math.floor(i/5);
            sums[scaleIdx] += answers[i];
        }
        // –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è 0..1
        let scores = sums.map(s => (s-5)/20); // 0..1

        // –≤–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞ (1-8)
        const ageGroup = parseInt(ageSelect.value);

        // –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∑—Ä–µ–ª–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–∏—Å—Ç–µ–º—ã (—ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–µ, –æ—Ç—Ä–∞–∂–∞—é—Ç —Ç–∏–ø–∏—á–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ)
        // —á–µ–º –≤—ã—à–µ –≤–æ–∑—Ä–∞—Å—Ç, —Ç–µ–º –±–æ–ª—å—à–µ –≤–µ—Å –∫–æ—Ä–∫–æ–≤—ã—Ö –∏ –º–µ—Ç–∞-—Å–∏—Å—Ç–µ–º
        let maturity = [
            1.0, 1.0, 1.0,        // —Ä–µ–ø—Ç–∏–ª—å–Ω—ã–µ (–≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã)
            1.0, 1.0, 1.0, 1.0, 1.0, 1.0, // –ª–∏–º–±–∏—á–µ—Å–∫–∏–µ (–±–∞–∑–∞)
            0.0, 0.0, 0.0          // –∫–æ—Ä–∫–æ–≤—ã–µ/–º–µ—Ç–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ 0
        ];

        if (ageGroup >= 3) { // —Å 6 –ª–µ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–æ–ª—å
            maturity[9] = 0.4;  // –ö–û–ù–¢–†–û–õ–¨
        }
        if (ageGroup >= 4) { // —Å 12 –ª–µ—Ç —Å–æ—Ü. –º–æ–∑–≥
            maturity[10] = 0.5; // –°–û–¶–ò–ê–õ–¨–ù–û–°–¢–¨
            maturity[9] = 0.7;
        }
        if (ageGroup >= 5) { // 18-25 ‚Äì –ø–∏–∫ –∫–æ–Ω—Ç—Ä–æ–ª—è
            maturity[9] = 1.0;
            maturity[10] = 0.9;
            maturity[11] = 0.4; // –°–ú–´–°–õ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
        }
        if (ageGroup >= 6) { // 26-40 ‚Äì –º–µ—Ç–∞-—Å–∏—Å—Ç–µ–º—ã
            maturity[10] = 1.0;
            maturity[11] = 0.8;
        }
        if (ageGroup >= 7) { // 41-60 ‚Äì –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
            maturity[11] = 1.0;
        }
        if (ageGroup >= 8) { // 60+ ‚Äì –º—É–¥—Ä–æ—Å—Ç—å
            // –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã, –Ω–æ –º–æ–≥—É—Ç —Å–Ω–∏–∂–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—É—á—Ç—ë–º –ø–æ–∑–∂–µ)
        }

        // –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Å —É—á—ë—Ç–æ–º –≤–æ–∑—Ä–∞—Å—Ç–∞ (—É–º–Ω–æ–∂–∞–µ–º —Å—ã—Ä—ã–µ score –Ω–∞ maturity, –Ω–æ –Ω–µ –≤—ã—à–µ 1)
        let adjusted = scores.map((val, idx) => Math.min(val, maturity[idx] * 1.2)); // –Ω–µ–±–æ–ª—å—à–∞—è —ç–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç—å

        // –ø—Ä–∏–º–µ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–µ–¥—É—â–∏—Ö —Å–∏—Å—Ç–µ–º (top 4)
        let indexed = adjusted.map((v,i)=>({v,i})).sort((a,b)=>b.v - a.v);
        let topSystems = indexed.slice(0,4).map(x => scaleNames[x.i]);

        // –æ—á–µ–Ω—å –≥—Ä—É–±–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–¥–µ–º–æ)
        let category = 'white';
        if (adjusted[4] > 0.8 && adjusted[5] > 0.7 && adjusted[9] < 0.4) category = 'black'; // –≤—ã—Å–æ–∫–∏–π —Å—Ç—Ä–∞—Ö+–≥–Ω–µ–≤ –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –∫–æ–Ω—Ç—Ä–æ–ª–µ
        else if (adjusted[0] > 0.9 || adjusted[1] > 0.9) category = 'gray'; // –≥–∏–ø–µ—Ä—Ç—Ä–æ—Ñ–∏—è —Ä–µ–ø—Ç–∏–ª—å–Ω—ã—Ö
        else category = 'white';

        // –∑–∞–≥–ª—É—à–∫–∞ ‚Äì –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
        showResult(adjusted, topSystems, category, ageGroup, maturity);
    }

    function showResult(scores, topSystems, category, ageGroup, maturity) {
        quizBlock.style.display = 'none';
        resultBlock.style.display = 'block';

        const ageNames = ["0-2","3-5","6-11","12-17","18-25","26-40","41-60","60+"];
        let cardClass = category==='white'?'white-card':(category==='gray'?'gray-card':'black-card');

        let html = `
            <div class="result-card ${cardClass}">
                <div class="archetype-title">–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å —Ä–∞–∑–≤–∏—Ç–∏—è</div>
                <div class="archetype-badge">–≤–æ–∑—Ä–∞—Å—Ç: ${ageNames[ageGroup-1]}</div>
                <p style="margin-bottom:20px;">–≤–µ–¥—É—â–∏–µ —Å–∏—Å—Ç–µ–º—ã: ${topSystems.join(' ¬∑ ')}</p>
        `;

        // –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ø–æ –∫–∞–∂–¥–æ–π —Å–∏—Å—Ç–µ–º–µ —Å —É—Ä–æ–≤–Ω—è–º–∏
        for (let i=0; i<12; i++) {
            let raw = scores[i];
            // –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∫–ª–∞–¥ –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è (—É—Å–ª–æ–≤–Ω–æ)
            let rept = 0, limb = 0, cort = 0, meta = 0;
            if (i < 3) { // —Ä–µ–ø—Ç–∏–ª—å–Ω—ã–µ
                rept = raw * 0.9;
                limb = raw * 0.1;
            } else if (i < 9) { // –ª–∏–º–±–∏—á–µ—Å–∫–∏–µ
                rept = raw * 0.2 * (1 - maturity[i]);
                limb = raw * 0.8 * maturity[i];
                cort = raw * 0.2 * maturity[i];
            } else { // –∫–æ—Ä–∫–æ–≤—ã–µ / –º–µ—Ç–∞
                rept = raw * 0.05;
                limb = raw * 0.15 * maturity[i];
                cort = raw * 0.5 * maturity[i];
                meta = raw * 0.3 * maturity[i];
            }

            html += `
                <div class="system-row">
                    <span class="system-name">${scaleNames[i]}</span>
                    <div class="level-bar-container">
                        <div class="level-segment segment-1" style="width:${rept*100}%;"></div>
                        <div class="level-segment segment-2" style="width:${limb*100}%;"></div>
                        <div class="level-segment segment-3" style="width:${cort*100}%;"></div>
                        <div class="level-segment segment-4" style="width:${meta*100}%;"></div>
                    </div>
                    <span class="age-note">${Math.round(raw*100)}%</span>
                </div>
            `;
        }

        // –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (—É—Å–ª–æ–≤–Ω—ã–µ)
        html += `<div class="mystic-tags">
            <span class="mystic-tag">‚ôà —Å—Ç–∏—Ö–∏—è: ${['–∑–µ–º–ª—è','–≤–æ–¥–∞','–æ–≥–æ–Ω—å','–≤–æ–∑–¥—É—Ö'][Math.floor(Math.random()*4)]}</span>
            <span class="mystic-tag">ü™ê –ø–ª–∞–Ω–µ—Ç–∞: ${['–ú–∞—Ä—Å','–í–µ–Ω–µ—Ä–∞','–Æ–ø–∏—Ç–µ—Ä','–°–∞—Ç—É—Ä–Ω'][Math.floor(Math.random()*4)]}</span>
            <span class="mystic-tag">üé¥ –∞—Ä—Ö–µ—Ç–∏–ø: ${['–í–û–ò–ù','–ú–£–î–†–ï–¶','–≠–ú–ü–ê–¢','–°–¢–†–ê–¢–ï–ì'][Math.floor(Math.random()*4)]}</span>
        </div>`;

        // –∫–Ω–æ–ø–∫–∞ –∑–∞–Ω–æ–≤–æ
        html += `<div style="text-align:center; margin:40px 0 20px;"><button id="restartBtn">‚ü≤ –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button></div>`;
        resultBlock.innerHTML = html;

        document.getElementById('restartBtn')?.addEventListener('click', ()=>{
            answers.fill(3);
            currentIndex = 0;
            quizBlock.style.display = 'block';
            resultBlock.style.display = 'none';
            renderQuestion();
        });
    }

    renderQuestion();
})();
</script>
</body>
</html>